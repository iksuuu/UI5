sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","../model/chatModel","../model/formatter"],function(e,t,s,o){"use strict";return e.extend("sap.u5.walkthrough.pythonui5.controller.HelloPanel",{formatter:o,onInit:function(){var e=s.createChatModel();this.getView().setModel(e)},onShowHello:function(){var e=this.getView().getModel("i18n").getResourceBundle();var s=e.getText("showLLMButtonText");t.show(s)},onSendMessage:function(){var e=this.getView().byId("userInput").getValue();fetch("https://py_app-chipper-wildebeest-uf.cfapps.us10-001.hana.ondemand.com/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e})}).then(e=>{if(!e.ok){throw new Error("Network response was not ok")}return e.json()}).then(e=>{var t=this.getView().getModel();var s=t.getProperty("/messages");s.push({author:"User",message:e.response.input});s.push({author:"System",message:e.response.output});s.push({author:"SQL",message:e.sql});t.setProperty("/messages",s);t.refresh();this.byId("status").setText("Connected")}).catch(e=>{this.byId("status").setText("Error");this.addMessage("system","Error: No response from server")})}})});
//# sourceMappingURL=HelloPanel.controller.js.map